<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <script src="https://cdn.jsdelivr.net/npm/appwrite@14.0.1"></script>

    <script src="./js/color-modes.js"></script>
<script src="https://cdn.jsdelivr.net/npm/appwrite@16.0.2">
const client = new Client();
client.setProject('codaxweb');
</script>
<script>
    const { Client } = Appwrite;
</script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Official Website of the Codax Community">
    <meta property="og:description" content="Opisyal nga Website sang Komunidad sang Codax "/>
    <meta name="author" content="Trion05">
    <meta name="generator" content="Hugo 0.122.0">
    <title>The Codax Official</title>

    <link href="./style/css/bootstrap.min.css" rel="stylesheet">
    <link href="./style/style.css" rel="stylesheet">
    <link href="./img/logo.png" rel="icon" type="image">

    <style>
      .blog-entry {
        margin-bottom: 2em;
        padding: 1em;
        border-bottom: 1px solid #ddd;
      }
      .blog-meta {
        font-size: 0.9em;
        color: #666;
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const client = new Appwrite.Client();
        const databases = new Appwrite.Databases(client);

        client
          .setEndpoint('https://cloud.appwrite.io/v1') // Replace with your endpoint
          .setProject('codaxweb')                    // Replace with your project ID

        async function fetchBlogs() {
          const databaseId = 'posts'; // Replace with your actual database ID
          const collectionId = 'blogs'; // Replace with your collection ID

          try {
            const response = await databases.listDocuments(databaseId, collectionId);

            const blogsContainer = document.getElementById('blogs-container');
            blogsContainer.innerHTML = ''; // Clear existing content

            if (response.documents.length > 0) {
              response.documents.forEach(blog => {
                const blogHTML = `
                  <div class="blog-entry">
                    <h1>${blog.title}</h1>
                    <p class="blog-meta">
                      Published on: ${new Date(blog.date).toLocaleDateString()} 
                      by <a href="${blog.author_link || '#'}">${blog.author || 'Unknown'}</a>
                    </p>
                    <h2>${blog.headline}</h2>
                    <div>${blog.content}</div>
                  </div>`;
                blogsContainer.innerHTML += blogHTML;
              });
            } else {
              blogsContainer.innerHTML = `<p>No blogs found.</p>`;
            }
          } catch (error) {
            console.error('Error fetching blogs:', error);
            const blogsContainer = document.getElementById('blogs-container');
            blogsContainer.innerHTML = `<p>Error loading blogs. Please try again later.</p>`;
          }
        }

        fetchBlogs(); // Call the function to load blogs
      });
    </script>
  </head>
  <body>
    <div class="container">
      <header class="border-bottom lh-1 py-3">
        <div class="row flex-nowrap justify-content-center align-items-center">
          <div class="col-4 pt-1">
            <img src="./img/alt_logo.png" class="icon" alt="Codax Icon">
          </div>
          <div class="col-4 text-center">
            <a class="blog-header-logo text-body-emphasis text-decoration-none" href="#">Codax</a>
          </div>
          <div class="col-4 d-flex justify-content-end align-items-center">
            <a class="btn btn-sm btn-outline-secondary" href="#">Join Us</a>
          </div>
        </div>
      </header>
      <div class="p-4 p-md-5 mb-4 rounded text-body-emphasis bg-body-secondary text-center">
        <img src="./img/logo.png" height="200vh" alt="Codax Main Logo"><br>
        <h1>CODAX</h1>
      </div>
      <div id="blogs-container" class="mt-5">
        <h3 class="pb-4 mb-4 fst-italic border-bottom">Blogs</h3>
        <p>Loading blogs...</p>
      </div>

      <footer class="py-5 text-center text-body-secondary bg-body-tertiary">
        Codax Official Website
      </footer>
    </div>

    <script src="./js/bootstrap.bundle.min.js"></script>
  </body>
</html>
